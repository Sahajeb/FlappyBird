 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Flappy Combat â€“ Configurable Bird</title>

<style>
*{box-sizing:border-box}
html,body{
  margin:0;height:100%;overflow:hidden;
  background:#020617;
  display:flex;justify-content:center;align-items:center;
  font-family:Arial,Helvetica,sans-serif;
}

#game-container{
  position:relative;
  width:100%;
  max-width:420px;
  aspect-ratio:2/3;
  background:#70c5ce;
  border-radius:14px;
  overflow:hidden;
}

canvas{width:100%;height:100%;display:block}

.ui{position:absolute;z-index:10;color:white;font-weight:700}

#score{top:10px;right:10px}
#level{top:34px;right:10px}
#shootBtn{bottom:16px;right:16px;background:#ef4444}

button{
  border:none;border-radius:10px;
  padding:10px 16px;
  font-weight:700;cursor:pointer;
}

#startBtn,#restartBtn{
  position:absolute;left:50%;
  transform:translateX(-50%);
  background:#22c55e;color:white;
}

#startBtn{bottom:28px}
#restartBtn{top:58%;display:none}

/* CONFIG PANEL */
#config{
  position:absolute;inset:0;
  background:rgba(0,0,0,.75);
  z-index:20;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:14px;
}

select,input{padding:6px;border-radius:6px}
</style>
</head>

<body>

<div id="game-container">
  <canvas id="game"></canvas>

  <div id="config">
    <div>
      Shape:
      <select id="shapeSelect">
        <option value="bird">Full Bird</option>
        <option value="face">Face Only</option>
      </select>
    </div>

    <div>
      Size:
      <select id="sizeSelect">
        <option value="24">Small</option>
        <option value="32" selected>Medium</option>
        <option value="42">Large</option>
      </select>
    </div>

    <div>
      Image:
      <input id="imageInput" type="file" accept="image/*">
    </div>
  </div>

  <div id="score" class="ui">Score: 0</div>
  <div id="level" class="ui">Level: 1</div>

  <button id="startBtn">START</button>
  <button id="restartBtn">RESTART</button>
  <button id="shootBtn" class="ui">ðŸ”¥ FIRE</button>
</div>

<script>
/* ================= CANVAS ================= */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

function resize(){
  const dpr=window.devicePixelRatio||1;
  const r=canvas.getBoundingClientRect();
  canvas.width=r.width*dpr;
  canvas.height=r.height*dpr;
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
addEventListener("resize",resize);resize();

/* ================= STATE ================= */
let started=false,gameOver=false;
let score=0,level=1,frame=0,pipeSpeed=1.9;

/* ================= CONFIG ================= */
let birdShape="bird";
const birdImg=new Image();

const bird={
  x:80,y:220,w:32,h:32,vy:0,
  gravity:.35,lift:-7.2,terminal:7,

  flap(){this.vy=this.lift},

  update(dt){
    this.vy+=this.gravity*dt;
    this.vy=Math.min(this.vy,this.terminal);
    this.y+=this.vy*dt;
    if(this.y<0)this.y=0;
    if(this.y+this.h>canvas.height-70)gameOver=true;
  },

  draw(){
    if(!birdImg.src){
      ctx.fillStyle="#dc2626";
      ctx.fillRect(this.x,this.y,this.w,this.h);
      return;
    }

    if(birdShape==="face"){
      ctx.save();
      ctx.beginPath();
      ctx.arc(this.x+this.w/2,this.y+this.h/2,this.w/2,0,Math.PI*2);
      ctx.clip();
      ctx.drawImage(birdImg,this.x,this.y,this.w,this.h);
      ctx.restore();
    }else{
      ctx.drawImage(birdImg,this.x,this.y,this.w,this.h);
    }
  }
};

/* ================= CLOUDS & GROUND ================= */
const clouds=[...Array(4)].map(()=>({
  x:Math.random()*canvas.width,y:Math.random()*140,r:18+Math.random()*18
}));

function drawClouds(){
  ctx.fillStyle="white";
  clouds.forEach(c=>{
    c.x-=.25;if(c.x<-60)c.x=canvas.width+60;
    ctx.beginPath();
    ctx.arc(c.x,c.y,c.r,0,Math.PI*2);
    ctx.arc(c.x+20,c.y+10,c.r,0,Math.PI*2);
    ctx.arc(c.x-20,c.y+10,c.r,0,Math.PI*2);
    ctx.fill();
  });
}
function drawGround(){
  ctx.fillStyle="#16a34a";
  ctx.fillRect(0,canvas.height-70,canvas.width,70);
}

/* ================= PIPES ================= */
const pipes=[];
function addPipe(){
  pipes.push({
    x:canvas.width,
    top:60+Math.random()*200,
    gap:160,scored:false
  });
}
function updatePipes(dt){
  if(frame%130===0)addPipe();
  pipes.forEach(p=>{
    p.x-=pipeSpeed*dt;
    if(
      bird.x<p.x+56 && bird.x+bird.w>p.x &&
      (bird.y<p.top || bird.y+bird.h>p.top+p.gap)
    )gameOver=true;

    if(!p.scored && p.x+56<bird.x){
      p.scored=true;score++;
      if(score%6===0){level++;pipeSpeed+=.25}
      updateHUD();
    }
  });
}
function drawPipes(){
  ctx.fillStyle="#15803d";
  pipes.forEach(p=>{
    ctx.fillRect(p.x,0,56,p.top);
    ctx.fillRect(p.x,p.top+p.gap,56,canvas.height);
  });
}

/* ================= COMBAT ================= */
let bullets=[],enemies=[];
function shoot(){
  if(!started||gameOver||bullets.length>6)return;
  bullets.push({x:bird.x+bird.w,y:bird.y+bird.h/2,w:10,h:3});
}
function spawnEnemy(){
  enemies.push({
    x:canvas.width+40,
    y:90+Math.random()*(canvas.height-240),
    alive:true,boom:0
  });
}
function updateCombat(dt){
  if(frame%190===0)spawnEnemy();
  bullets.forEach(b=>b.x+=6.5*dt);
  enemies.forEach(e=>{
    e.alive?e.x-=(1.6+level*.25)*dt:e.boom+=dt;
  });
  bullets.forEach(b=>{
    enemies.forEach(e=>{
      if(e.alive&&
        b.x<e.x+36&&b.x+b.w>e.x&&
        b.y<e.y+36&&b.y+b.h>e.y){
          e.alive=false;score+=2;updateHUD();
      }
    });
  });
  bullets=bullets.filter(b=>b.x<canvas.width);
  enemies=enemies.filter(e=>e.x>-60&&e.boom<8);
}
function drawCombat(){
  ctx.fillStyle="yellow";
  bullets.forEach(b=>ctx.fillRect(b.x,b.y,b.w,b.h));
  enemies.forEach(e=>{
    if(e.alive){
      ctx.fillStyle="#7c3aed";
      ctx.fillRect(e.x,e.y,36,36);
    }else{
      ctx.fillStyle=`rgba(255,140,0,${1-e.boom/8})`;
      ctx.beginPath();
      ctx.arc(e.x+18,e.y+18,e.boom*5,0,Math.PI*2);
      ctx.fill();
    }
  });
}

/* ================= INPUT ================= */
canvas.addEventListener("mousedown",()=>bird.flap());
canvas.addEventListener("touchstart",e=>{
  e.preventDefault();
  e.touches.length===1?bird.flap():shoot();
},{passive:false});
document.addEventListener("keydown",e=>{
  if(e.code==="Space")bird.flap();
  if(e.code==="KeyF")shoot();
});
shootBtn.onclick=shoot;

/* ================= UI ================= */
const startBtn=document.getElementById("startBtn");
const restartBtn=document.getElementById("restartBtn");
const scoreEl=document.getElementById("score");
const levelEl=document.getElementById("level");
const config=document.getElementById("config");

function updateHUD(){
  scoreEl.textContent="Score: "+score;
  levelEl.textContent="Level: "+level;
}

startBtn.onclick=()=>{
  birdShape=document.getElementById("shapeSelect").value;
  const size=+document.getElementById("sizeSelect").value;
  bird.w=bird.h=size;
  started=true;
  config.style.display="none";
  startBtn.style.display="none";
};

restartBtn.onclick=()=>{
  score=0;level=1;frame=0;pipeSpeed=1.9;
  pipes.length=bullets.length=enemies.length=0;
  bird.y=220;bird.vy=0;
  gameOver=false;
  restartBtn.style.display="none";
  updateHUD();
};

document.getElementById("imageInput").onchange=e=>{
  const r=new FileReader();
  r.onload=ev=>birdImg.src=ev.target.result;
  r.readAsDataURL(e.target.files[0]);
};

/* ================= LOOP ================= */
let last=0;
function loop(t){
  const dt=(t-last)/16.67;last=t;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawClouds();

  if(started&&!gameOver){
    frame++;
    bird.update(dt);
    updatePipes(dt);
    updateCombat(dt);
  }

  drawPipes();
  drawCombat();
  bird.draw();
  drawGround();

  if(gameOver){
    ctx.fillStyle="rgba(0,0,0,.55)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="white";
    ctx.font="26px Arial";
    ctx.textAlign="center";
    ctx.fillText("GAME OVER",canvas.width/2,canvas.height/2);
    restartBtn.style.display="block";
  }
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
</script>
</body>
</html>
