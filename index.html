 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Flappy Face Bird</title>

<style>
*{box-sizing:border-box}
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:#020617;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial,Helvetica,sans-serif;
}

#game-container{
  position:relative;
  width:100%;
  max-width:420px;
  aspect-ratio:2/3;
  background:#70c5ce;
  border-radius:14px;
  overflow:hidden;
}

canvas{width:100%;height:100%;display:block}

.ui{
  position:absolute;
  z-index:10;
  color:white;
  font-weight:700;
}

#score{top:10px;right:10px;font-size:18px}
#imageInput{top:10px;left:10px;font-size:11px}

button{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  padding:12px 20px;
  border:none;
  border-radius:10px;
  background:#22c55e;
  color:white;
  font-weight:700;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="game-container">
  <canvas id="game"></canvas>
  <input id="imageInput" class="ui" type="file" accept="image/*">
  <div id="score" class="ui">Score: 0</div>
  <button id="startBtn">START</button>
</div>

<script>
/* ================= CANVAS ================= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener("resize",resize);
resize();

/* ================= GAME STATE ================= */
let started=false;
let score=0;
let frame=0;
let lastTime=0;

/* ================= FACE IMAGE ================= */
const faceImg = new Image();

/* ================= BIRD ================= */
const bird = {
  x:90,
  y:220,
  w:46,
  h:36,
  vy:0,

  gravity:0.35,
  lift:-7,
  wingPhase:0,

  flap(){
    this.vy=this.lift;
  },

  update(dt){
    this.vy+=this.gravity*dt;
    this.y+=this.vy*dt;
    this.wingPhase+=0.25*dt;

    if(this.y<0) this.y=0;
    if(this.y+this.h>canvas.height-70) this.y=canvas.height-70-this.h;
  },

  draw(){
    const cx=this.x+this.w/2;
    const cy=this.y+this.h/2;

    // Rotate slightly based on velocity
    ctx.save();
    ctx.translate(cx,cy);
    ctx.rotate(Math.max(-0.4,Math.min(0.4,this.vy*0.04)));
    ctx.translate(-cx,-cy);

    /* BODY */
    ctx.fillStyle="#facc15";
    ctx.beginPath();
    ctx.ellipse(cx,cy,22,16,0,0,Math.PI*2);
    ctx.fill();

    /* WINGS (FLAP ANIMATION) */
    const wingOffset=Math.sin(this.wingPhase)*8;

    ctx.fillStyle="#fde047";
    ctx.beginPath();
    ctx.ellipse(cx-22,cy+wingOffset,10,6,0,0,Math.PI*2);
    ctx.fill();

    ctx.beginPath();
    ctx.ellipse(cx+22,cy-wingOffset,10,6,0,0,Math.PI*2);
    ctx.fill();

    /* FACE (IMAGE MASK) */
    ctx.save();
    ctx.beginPath();
    ctx.arc(cx+6,cy-2,10,0,Math.PI*2);
    ctx.clip();

    if(faceImg.src){
      ctx.drawImage(faceImg,cx-6,cy-12,24,24);
    }else{
      ctx.fillStyle="#ef4444";
      ctx.fillRect(cx-6,cy-12,24,24);
    }
    ctx.restore();

    ctx.restore();
  }
};

/* ================= CLOUDS ================= */
const clouds=[...Array(4)].map(()=>({
  x:Math.random()*canvas.width,
  y:Math.random()*140,
  r:18+Math.random()*18
}));

function drawClouds(){
  ctx.fillStyle="white";
  clouds.forEach(c=>{
    c.x-=0.25;
    if(c.x<-60) c.x=canvas.width+60;
    ctx.beginPath();
    ctx.arc(c.x,c.y,c.r,0,Math.PI*2);
    ctx.arc(c.x+20,c.y+10,c.r,0,Math.PI*2);
    ctx.arc(c.x-20,c.y+10,c.r,0,Math.PI*2);
    ctx.fill();
  });
}

/* ================= GROUND ================= */
function drawGround(){
  ctx.fillStyle="#16a34a";
  ctx.fillRect(0,canvas.height-70,canvas.width,70);
}

/* ================= INPUT ================= */
canvas.addEventListener("touchstart",e=>{
  e.preventDefault();
  bird.flap();
},{passive:false});

canvas.addEventListener("mousedown",()=>bird.flap());
document.addEventListener("keydown",e=>{
  if(e.code==="Space") bird.flap();
});

document.getElementById("imageInput").onchange=e=>{
  const r=new FileReader();
  r.onload=ev=>faceImg.src=ev.target.result;
  r.readAsDataURL(e.target.files[0]);
};

/* ================= START ================= */
document.getElementById("startBtn").onclick=()=>{
  started=true;
  document.getElementById("startBtn").style.display="none";
};

/* ================= LOOP ================= */
function loop(t){
  const dt=(t-lastTime)/16.67;
  lastTime=t;

  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawClouds();

  if(started){
    frame++;
    bird.update(dt);
    if(frame%60===0){
      score++;
      document.getElementById("score").textContent="Score: "+score;
    }
  }

  bird.draw();
  drawGround();

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
</script>

</body>
</html>
